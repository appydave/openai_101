In this process, we are reversing Ruby's shorthand hash syntax back to its explicit form.
Below are the specific diffs for each file. Apply the necessary fixes as outlined.
In this process, we are reversing Rubys shorthand hash syntax (e.g., `activity:`) back to its explicit form (e.g., `activity: activity`).

For example:
Before (shorthand): `activity:`
After (explicit): `activity: activity`

Similarly, if there are multiple key-value pairs:

Before (shorthand): `first_name:, last_name:, date_of_birth:`
After (explicit): `first_name: first_name, last_name: last_name, date_of_birth: date_of_birth`

Below are the specific diffs for each file. Apply the necessary fixes as outlined.


File: app/models/campaign.rb
Apply the fix to this code:
@@ -40,16 +40,16 @@ class Campaign < ApplicationRecord
 
-    found_template = tenant.campaigns.where(global: false, name: name, parent_id: nil)
-    found_template = found_template.where.not(id: id) if id.present?
+    found_template = tenant.campaigns.where(global: false, name:, parent_id: nil)
+    found_template = found_template.where.not(id:) if id.present?
 
 
-    found_template = tenant.enterprise.campaigns.where(global: true, name: name, parent_id: nil)
-    found_template = found_template.where.not(id: id) if id.present?
+    found_template = tenant.enterprise.campaigns.where(global: true, name:, parent_id: nil)
+    found_template = found_template.where.not(id:) if id.present?

Apply the fix to this code:
@@ -102,7 +102,7 @@ class Campaign < ApplicationRecord
 
-      object = klass.where(tenant_id: tenant_id, contact_id: contact_ids).for_dates(attribution_start, (created_at + range))
+      object = klass.where(tenant_id:, contact_id: contact_ids).for_dates(attribution_start, (created_at + range))

Apply the fix to this code:
@@ -119,7 +119,7 @@ class Campaign < ApplicationRecord
-            object = object.where(sales_rep_user_id: sales_rep_user_id)
+            object = object.where(sales_rep_user_id:)

Apply the fix to this code:
@@ -257,8 +257,8 @@ class Campaign < ApplicationRecord
-          parent_message = CampaignMessage.joins(:campaign, :contact).where(campaigns: {id: id}, parent_message_id: nil).where("LOWER(BTRIM(contacts.email)) = ?", Email.clean_email(contact.email)).first
-          message = CampaignMessage.find_or_initialize_by(tenant_id: tenant_id, campaign_id: id, contact_id: contact.id)
+          parent_message = CampaignMessage.joins(:campaign, :contact).where(campaigns: {id:}, parent_message_id: nil).where("LOWER(BTRIM(contacts.email)) = ?", Email.clean_email(contact.email)).first
+          message = CampaignMessage.find_or_initialize_by(tenant_id:, campaign_id: id, contact_id: contact.id)

Apply the fix to this code:
@@ -272,20 +272,20 @@ class Campaign < ApplicationRecord
-          Activity.create!(tenant_id: tenant_id, contact_id: contact.id, company_id: contact.company.try(:id), campaign_id: id, campaign_message_id: message.id, activity_for: "campaign_message") unless test
+          Activity.create!(tenant_id:, contact_id: contact.id, company_id: contact.company.try(:id), campaign_id: id, campaign_message_id: message.id, activity_for: "campaign_message") unless test
-        Activity.find_or_create_by(user_id: user_id, tenant_id: tenant_id, campaign_id: id, activity_for: "campaign_sent")
+        Activity.find_or_create_by(user_id:, tenant_id:, campaign_id: id, activity_for: "campaign_sent")
 
-          tag_category.tag_context(self, user_id: user_id)
+          tag_category.tag_context(self, user_id:)

Apply the fix to this code:
@@ -600,7 +600,7 @@ class Campaign < ApplicationRecord
-      event = Google::Apis::CalendarV3::Event.new(summary: summary, start: event_start, end: event_end)
+      event = Google::Apis::CalendarV3::Event.new(summary:, start: event_start, end: event_end)

Apply the fix to this code:
@@ -993,8 +993,8 @@ class Campaign < ApplicationRecord
-                title: title,
-                sub_title: sub_title,
+                title:,
+                sub_title:,

File: app/models/company.rb
Apply the fix to this code:
@@ -115,23 +115,23 @@ class Company < ApplicationRecord
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)

Apply the fix to this code:
@@ -145,7 +145,7 @@ class Company < ApplicationRecord
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)

Apply the fix to this code:
@@ -173,11 +173,11 @@ class Company < ApplicationRecord
-          "#{ApplicationController.helpers.number_to_currency(company['invoice_value'], tenant: tenant, precision: 2)}",
-          "#{ApplicationController.helpers.number_to_currency(company['invoice_total_value'], tenant: tenant, precision: 2)}",
+          "#{ApplicationController.helpers.number_to_currency(company['invoice_value'], tenant:, precision: 2)}",
+          "#{ApplicationController.helpers.number_to_currency(company['invoice_total_value'], tenant:, precision: 2)}",
-          "#{ApplicationController.helpers.number_to_currency(company['invoice_value_ly'].to_f, tenant: tenant, precision: 2)}",
-          "#{ApplicationController.helpers.number_to_currency(company['invoice_value'].to_f / company['invoice_count'].to_f || 0, tenant: tenant, precision: 2)}"
+          "#{ApplicationController.helpers.number_to_currency(company['invoice_value_ly'].to_f, tenant:, precision: 2)}",
+          "#{ApplicationController.helpers.number_to_currency(company['invoice_value'].to_f / company['invoice_count'].to_f || 0, tenant:, precision: 2)}"

Apply the fix to this code:
@@ -192,11 +192,11 @@ class Company < ApplicationRecord
-          "#{ApplicationController.helpers.number_to_currency(company["invoice_value"], tenant: tenant, precision: 2)}",
-          "#{ApplicationController.helpers.number_to_currency(company["invoice_total_value"], tenant: tenant, precision: 2)}",
+          "#{ApplicationController.helpers.number_to_currency(company["invoice_value"], tenant:, precision: 2)}",
+          "#{ApplicationController.helpers.number_to_currency(company["invoice_total_value"], tenant:, precision: 2)}",
-          "#{ApplicationController.helpers.number_to_currency(company["invoice_value_ly"], tenant: tenant, precision: 2)}",
-          "#{ApplicationController.helpers.number_to_currency(company["invoice_value"].to_f / company["invoice_count"].to_f || 0, tenant: tenant, precision: 2)}"
+          "#{ApplicationController.helpers.number_to_currency(company["invoice_value_ly"], tenant:, precision: 2)}",
+          "#{ApplicationController.helpers.number_to_currency(company["invoice_value"].to_f / company["invoice_count"].to_f || 0, tenant:, precision: 2)}"

Apply the fix to this code:
@@ -305,7 +305,7 @@ class Company < ApplicationRecord
-         where(tenant: tenant).
+         where(tenant:).

Apply the fix to this code:
@@ -323,7 +323,7 @@ class Company < ApplicationRecord
-         where(tenant: tenant).
+         where(tenant:).

Apply the fix to this code:
@@ -341,7 +341,7 @@ class Company < ApplicationRecord
-         where(tenant: tenant).
+         where(tenant:).

Apply the fix to this code:
@@ -359,7 +359,7 @@ class Company < ApplicationRecord
-            where(tenant: tenant).
+            where(tenant:).

Apply the fix to this code:
@@ -373,7 +373,7 @@ class Company < ApplicationRecord
 
-    Campaign.joins(:messages).joins("JOIN contacts ON contacts.id = campaign_messages.contact_id").where(tenant_id: tenant_id, contacts: {company_id: id}).where.not(parent_id: nil).group("campaigns.id")
+    Campaign.joins(:messages).joins("JOIN contacts ON contacts.id = campaign_messages.contact_id").where(tenant_id:, contacts: {company_id: id}).where.not(parent_id: nil).group("campaigns.id")

Apply the fix to this code:
@@ -448,7 +448,7 @@ class Company < ApplicationRecord
 
-    calculated_company = calculated_company.where(id: id, tenant_id: tenant.id).first
+    calculated_company = calculated_company.where(id:, tenant_id: tenant.id).first

Apply the fix to this code:
@@ -534,13 +534,13 @@ class Company < ApplicationRecord
 
-      rolling_1_falloff_next_day: rolling_1_falloff_next_day,
-      rolling_12_falloff_next_day: rolling_12_falloff_next_day,
-      rolling_12_ly_falloff_next_day: rolling_12_ly_falloff_next_day,
-      rolling_12_ly_ly_falloff_next_day: rolling_12_ly_ly_falloff_next_day,
-      financial_year_falloff: financial_year_falloff,
-      financial_year_ly_falloff: financial_year_ly_falloff,
-      financial_year_ly_ly_falloff: financial_year_ly_ly_falloff
+      rolling_1_falloff_next_day:,
+      rolling_12_falloff_next_day:,
+      rolling_12_ly_falloff_next_day:,
+      rolling_12_ly_ly_falloff_next_day:,
+      financial_year_falloff:,
+      financial_year_ly_falloff:,
+      financial_year_ly_ly_falloff:

File: app/models/contact.rb
Apply the fix to this code:
@@ -121,7 +121,7 @@ class Contact < ApplicationRecord
 
-  scope :inactive, -> (tenant) { where(tenant: tenant).joins("LEFT OUTER JOIN companies ON contacts.company_id = companies.id").where(deleted: true) }
+  scope :inactive, -> (tenant) { where(tenant:).joins("LEFT OUTER JOIN companies ON contacts.company_id = companies.id").where(deleted: true) }

Apply the fix to this code:
@@ -131,8 +131,8 @@ class Contact < ApplicationRecord
 
-  scope :single_purchase_in_daterange, -> (start_date, end_date, invoiced: false) { any_sale_in_daterange(start_date, end_date, invoiced: invoiced).where("(#{Sale.select("COUNT(invoices.id)").invoiced(invoiced).where("invoices.tenant_id = contacts.tenant_id").where("invoices.contact_id = contacts.id").where(pickup_date: start_date..end_date).to_sql}) = 1") }
-  scope :multiple_purchase_in_daterange, -> (start_date, end_date, invoiced: false) { any_sale_in_daterange(start_date, end_date, invoiced: invoiced).where("(#{Sale.select("COUNT(invoices.id)").invoiced(invoiced).where("invoices.tenant_id = contacts.tenant_id").where("invoices.contact_id = contacts.id").where(pickup_date: start_date..end_date).to_sql}) > 1") }
+  scope :single_purchase_in_daterange, -> (start_date, end_date, invoiced: false) { any_sale_in_daterange(start_date, end_date, invoiced:).where("(#{Sale.select("COUNT(invoices.id)").invoiced(invoiced).where("invoices.tenant_id = contacts.tenant_id").where("invoices.contact_id = contacts.id").where(pickup_date: start_date..end_date).to_sql}) = 1") }
+  scope :multiple_purchase_in_daterange, -> (start_date, end_date, invoiced: false) { any_sale_in_daterange(start_date, end_date, invoiced:).where("(#{Sale.select("COUNT(invoices.id)").invoiced(invoiced).where("invoices.tenant_id = contacts.tenant_id").where("invoices.contact_id = contacts.id").where(pickup_date: start_date..end_date).to_sql}) > 1") }

Apply the fix to this code:
@@ -365,11 +365,11 @@ class Contact < ApplicationRecord
 
-    Company.unscoped.where(tenant_id: tenant_id, id: company_id).first.try(:prospect) if company_id.present? && temp == false
+    Company.unscoped.where(tenant_id:, id: company_id).first.try(:prospect) if company_id.present? && temp == false
 
-    Campaign.joins(:messages).joins("JOIN contacts ON contacts.id = campaign_messages.contact_id").where(tenant_id: tenant_id, campaign_messages: {contact_id: id}).where.not(parent_id: nil).group("campaigns.id")
+    Campaign.joins(:messages).joins("JOIN contacts ON contacts.id = campaign_messages.contact_id").where(tenant_id:, campaign_messages: {contact_id: id}).where.not(parent_id: nil).group("campaigns.id")

Apply the fix to this code:
@@ -418,7 +418,7 @@ class Contact < ApplicationRecord
 
-      potential_matches = Contact.where(tenant_id: tenant_id).where(conditions).where.not(id: id, company_id: nil)
+      potential_matches = Contact.where(tenant_id:).where(conditions).where.not(id:, company_id: nil)

Apply the fix to this code:
@@ -483,7 +483,7 @@ class Contact < ApplicationRecord
-      where(tenant: tenant).
+      where(tenant:).

Apply the fix to this code:
@@ -499,7 +499,7 @@ class Contact < ApplicationRecord
-      where(tenant: tenant).
+      where(tenant:).

Apply the fix to this code:
@@ -516,7 +516,7 @@ class Contact < ApplicationRecord
-      where(tenant: tenant).
+      where(tenant:).

Apply the fix to this code:
@@ -532,7 +532,7 @@ class Contact < ApplicationRecord
-      where(tenant: tenant).
+      where(tenant:).

Apply the fix to this code:
@@ -604,7 +604,7 @@ class Contact < ApplicationRecord
-      where(id: id, tenant_id: tenant.id).
+      where(id:, tenant_id: tenant.id).

Apply the fix to this code:
@@ -778,17 +778,17 @@ class Contact < ApplicationRecord
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)

Apply the fix to this code:
@@ -825,14 +825,14 @@ class Contact < ApplicationRecord
 
-    result = Unsubscribe.where(tenant_id: tenant_id, contact_id: id, fixed: false).to_a # RAILS 5 alteration
+    result = Unsubscribe.where(tenant_id:, contact_id: id, fixed: false).to_a # RAILS 5 alteration
 
-        tenant_id: tenant_id,
+        tenant_id:,
-        email: email,
+        email:,

Apply the fix to this code:
@@ -940,10 +940,10 @@ class Contact < ApplicationRecord
-      tenant_id: tenant_id,
+      tenant_id:,
-      email: email,
+      email:,

Apply the fix to this code:
@@ -1028,9 +1028,9 @@ class Contact < ApplicationRecord
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)
-                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant: tenant, precision: 2)
+                ApplicationController.helpers.number_to_currency(result[c].to_f, tenant:, precision: 2)

Apply the fix to this code:
@@ -1080,13 +1080,13 @@ class Contact < ApplicationRecord
 
-      rolling_1_falloff_next_day: rolling_1_falloff_next_day,
-      rolling_12_falloff_next_day: rolling_12_falloff_next_day,
-      rolling_12_ly_falloff_next_day: rolling_12_ly_falloff_next_day,
-      rolling_12_ly_ly_falloff_next_day: rolling_12_ly_ly_falloff_next_day,
-      financial_year_falloff: financial_year_falloff,
-      financial_year_ly_falloff: financial_year_ly_falloff,
-      financial_year_ly_ly_falloff: financial_year_ly_ly_falloff
+      rolling_1_falloff_next_day:,
+      rolling_12_falloff_next_day:,
+      rolling_12_ly_falloff_next_day:,
+      rolling_12_ly_ly_falloff_next_day:,
+      financial_year_falloff:,
+      financial_year_ly_falloff:,
+      financial_year_ly_ly_falloff:

Apply the fix to this code:
@@ -1215,7 +1215,7 @@ class Contact < ApplicationRecord
 
-    lead_type.prospect_status_items.where(prospect_status_id: prospect_status_id)
+    lead_type.prospect_status_items.where(prospect_status_id:)

Apply the fix to this code:
@@ -1228,17 +1228,17 @@ class Contact < ApplicationRecord
-      @next_item = ProspectStatusItem.where(prospect_status_id: prospect_status_id, lead_type_id: lead_type_id).first
+      @next_item = ProspectStatusItem.where(prospect_status_id:, lead_type_id:).first
 
-      if !ProspectStatusItemContact.where(prospect_status_item_id: @next_item.id, contact_id:  id, tenant_id: tenant_id, status: 2).first
+      if !ProspectStatusItemContact.where(prospect_status_item_id: @next_item.id, contact_id:  id, tenant_id:, status: 2).first
-          tenant_id: tenant_id,
+          tenant_id:,

Apply the fix to this code:
@@ -1297,7 +1297,7 @@ class Contact < ApplicationRecord
 
-    ProspectStatusItem.where(lead_type: lead_type, prospect_status_id: stages.pluck(:id))
+    ProspectStatusItem.where(lead_type:, prospect_status_id: stages.pluck(:id))

Apply the fix to this code:
@@ -1366,7 +1366,7 @@ class Contact < ApplicationRecord
-                                                                         tenant_id: tenant_id,
+                                                                         tenant_id:,

Apply the fix to this code:
@@ -1379,9 +1379,9 @@ class Contact < ApplicationRecord
-      result = status_items.find_by(item_type: 2, portal_link: portal_link, portal_item_approval_status: portal_status)
+      result = status_items.find_by(item_type: 2, portal_link:, portal_item_approval_status: portal_status)
-      result = status_items.find_by(item_type: 0, link_email_send: true, email_template_id: email_template_id, email_category: email_category)
+      result = status_items.find_by(item_type: 0, link_email_send: true, email_template_id:, email_category:)

Apply the fix to this code:
@@ -1575,8 +1575,8 @@ class Contact < ApplicationRecord
 
-      tenant: tenant,
-      user: user,
+      tenant:,
+      user:,

Apply the fix to this code:
@@ -1676,10 +1676,10 @@ class Contact < ApplicationRecord
-                  ApplicationController.helpers.number_to_currency(contact.financial_year_sales.to_f, tenant: tenant, precision: 2),
-                  ApplicationController.helpers.number_to_currency(contact.last_financial_ytd_sales.to_f, tenant: tenant, precision: 2),
-                  ApplicationController.helpers.number_to_currency(contact.rolling_12_month_sales.to_f, tenant: tenant, precision: 2),
-                  ApplicationController.helpers.number_to_currency(contact.rolling_12_month_sales_ly.to_f, tenant: tenant, precision: 2)]
+                  ApplicationController.helpers.number_to_currency(contact.financial_year_sales.to_f, tenant:, precision: 2),
+                  ApplicationController.helpers.number_to_currency(contact.last_financial_ytd_sales.to_f, tenant:, precision: 2),
+                  ApplicationController.helpers.number_to_currency(contact.rolling_12_month_sales.to_f, tenant:, precision: 2),
+                  ApplicationController.helpers.number_to_currency(contact.rolling_12_month_sales_ly.to_f, tenant:, precision: 2)]

Apply the fix to this code:
@@ -1687,8 +1687,8 @@ class Contact < ApplicationRecord
 
-          row << ApplicationController.helpers.number_to_currency(contact.sales_last_month.to_f, tenant: tenant, precision: 2) if Platform.is_mbe?(tenant)
-          row << ApplicationController.helpers.number_to_currency(contact.sales_last_month_ly.to_f, tenant: tenant, precision: 2) if Platform.is_mbe?(tenant)
+          row << ApplicationController.helpers.number_to_currency(contact.sales_last_month.to_f, tenant:, precision: 2) if Platform.is_mbe?(tenant)
+          row << ApplicationController.helpers.number_to_currency(contact.sales_last_month_ly.to_f, tenant:, precision: 2) if Platform.is_mbe?(tenant)

File: app/models/contact_list.rb
Apply the fix to this code:
@@ -31,14 +31,14 @@ class ContactList < ApplicationRecord
 
-        count.assign_attributes(total_count: total_count, generate_duration: end_time - start_time)
+        count.assign_attributes(total_count:, generate_duration: end_time - start_time)
-      Kaminari.paginate_array(result, total_count: total_count).page(0).per(total_count)
+      Kaminari.paginate_array(result, total_count:).page(0).per(total_count)
-      Kaminari.paginate_array(result, total_count: total_count).page(page).per(per)
+      Kaminari.paginate_array(result, total_count:).page(page).per(per)

Apply the fix to this code:
@@ -272,7 +272,7 @@ class ContactList < ApplicationRecord
-        sales_rep = SalesRep.where(tenant: tenant).where(platform_id: company.sales_rep_platform_id).first if sales_rep.nil? && !company.nil?
+        sales_rep = SalesRep.where(tenant:).where(platform_id: company.sales_rep_platform_id).first if sales_rep.nil? && !company.nil?

Apply the fix to this code:
@@ -343,10 +343,10 @@ class ContactList < ApplicationRecord
-        combined: combined,
+        combined:,
-        filename: filename,
+        filename:,

File: app/models/contact_list_rule.rb
Apply the fix to this code:
@@ -476,7 +476,7 @@ class ContactListRule < ApplicationRecord
-    Kaminari.paginate_array(result, total_count: total_count).page(page).per(per)
+    Kaminari.paginate_array(result, total_count:).page(page).per(per)

Apply the fix to this code:
@@ -777,7 +777,7 @@ class ContactListRule < ApplicationRecord
-      result[contact.id] = {invoice_numbers: invoice_numbers, invoice_totals: invoice_totals}
+      result[contact.id] = {invoice_numbers:, invoice_totals:}

Apply the fix to this code:
@@ -2002,7 +2002,7 @@ class ContactListRule < ApplicationRecord
-      primary_condition = sanitize_sql("ps_old.id = :value", value: value)
+      primary_condition = sanitize_sql("ps_old.id = :value", value:)

Apply the fix to this code:
@@ -2028,7 +2028,7 @@ class ContactListRule < ApplicationRecord
 
-    sanitize_sql("contacts.lead_type_id #{logical_operand} :value", value: value)
+    sanitize_sql("contacts.lead_type_id #{logical_operand} :value", value:)

Apply the fix to this code:
@@ -2068,7 +2068,7 @@ class ContactListRule < ApplicationRecord
 
-    sanitize_sql("companies.status #{logical_operand} :value", value: value)
+    sanitize_sql("companies.status #{logical_operand} :value", value:)

Apply the fix to this code:
@@ -2355,7 +2355,7 @@ class ContactListRule < ApplicationRecord
-      sanitize_sql("contacts.net_promoter_label #{logical_operand} :value", value: value)
+      sanitize_sql("contacts.net_promoter_label #{logical_operand} :value", value:)

Apply the fix to this code:
@@ -2402,7 +2402,7 @@ class ContactListRule < ApplicationRecord
 
-    sanitize_sql("contacts.privacy_data->>:value IS NOT NULL AND (contacts.privacy_data->:value->'state') = '1'", value: value)
+    sanitize_sql("contacts.privacy_data->>:value IS NOT NULL AND (contacts.privacy_data->:value->'state') = '1'", value:)

Apply the fix to this code:
@@ -2431,12 +2431,12 @@ class ContactListRule < ApplicationRecord
-        sanitize_sql "companies.enrichment_data->>:value <> '' AND companies.enrichment_data->>:value IS NOT NULL", value: value
+        sanitize_sql "companies.enrichment_data->>:value <> '' AND companies.enrichment_data->>:value IS NOT NULL", value:
-        sanitize_sql "TRIM(companies.enrichment_data->>:value) = '' OR companies.enrichment_data->>:value IS NULL", value: value
+        sanitize_sql "TRIM(companies.enrichment_data->>:value) = '' OR companies.enrichment_data->>:value IS NULL", value:
-      sanitize_sql "companies.enrichment_data->:value ?| array[:value2]", value: value, value2: value2
+      sanitize_sql "companies.enrichment_data->:value ?| array[:value2]", value:, value2:

File: app/models/custom_form.rb
Apply the fix to this code:
@@ -13,7 +13,7 @@ class CustomForm < ApplicationRecord
 
-    elements.where(page: page).order(position: :asc).each do |element|
+    elements.where(page:).order(position: :asc).each do |element|

File: app/models/custom_form_response.rb
Apply the fix to this code:
@@ -36,7 +36,7 @@ class CustomFormResponse < ApplicationRecord
-    elements = elements.where(page: page) if !page.nil?
+    elements = elements.where(page:) if !page.nil?

File: app/models/email.rb
Apply the fix to this code:
@@ -106,30 +106,30 @@ class Email < ApplicationRecord
 
-      subject: subject,
-      from_names: from_names,
-      from_addresses: from_addresses,
-      to_names: to_names,
-      to_addresses: to_addresses,
-      cc_names: cc_names,
-      cc_addresses: cc_addresses,
-      bcc_names: bcc_names,
-      bcc_addresses: bcc_addresses,
-      reply_to_names: reply_to_names,
-      reply_to_addresses: reply_to_addresses,
-      domains: domains,
+      subject:,
+      from_names:,
+      from_addresses:,
+      to_names:,
+      to_addresses:,
+      cc_names:,
+      cc_addresses:,
+      bcc_names:,
+      bcc_addresses:,
+      reply_to_names:,
+      reply_to_addresses:,
+      domains:,
-      internal_message_id: internal_message_id,
+      internal_message_id:,
-      contact_ids: contact_ids,
-      company_ids: company_ids,
-      estimate_ids: estimate_ids,
-      invoice_ids: invoice_ids,
-      inquiry_ids: inquiry_ids,
+      contact_ids:,
+      company_ids:,
+      estimate_ids:,
+      invoice_ids:,
+      inquiry_ids:,

Apply the fix to this code:
@@ -143,7 +143,7 @@ class Email < ApplicationRecord
-      subject: subject,
+      subject:,

Apply the fix to this code:
@@ -175,8 +175,8 @@ class Email < ApplicationRecord
-        contact_id: contact_id,
-        company_id: company_id
+        contact_id:,
+        company_id:

Apply the fix to this code:
@@ -197,8 +197,8 @@ class Email < ApplicationRecord
-        contact_id: contact_id,
-        company_id: company_id
+        contact_id:,
+        company_id:

Apply the fix to this code:
@@ -249,13 +249,13 @@ class Email < ApplicationRecord
 
-          to: to,
+          to:,
-          cc: cc,
-          bcc: bcc,
-          subject: subject,
+          cc:,
+          bcc:,
+          subject:,
-          attachment_uuid: attachment_uuid,
+          attachment_uuid:,

Apply the fix to this code:
@@ -407,10 +407,10 @@ class Email < ApplicationRecord
-        error_message: error_message,
+        error_message:,
-            id: id
+            id:

Apply the fix to this code:
@@ -504,7 +504,7 @@ class Email < ApplicationRecord
-              file_contents: file_contents,
+              file_contents:,

Apply the fix to this code:
@@ -553,7 +553,7 @@ class Email < ApplicationRecord
-      body: body
+      body:

Apply the fix to this code:
@@ -638,7 +638,7 @@ class Email < ApplicationRecord
-          destination: destination,
+          destination:,

Apply the fix to this code:
@@ -662,8 +662,8 @@ class Email < ApplicationRecord
-            subject: subject,
-            body: body
+            subject:,
+            body:

File: app/models/email_message.rb
Apply the fix to this code:
@@ -80,7 +80,7 @@ class EmailMessage < ApplicationRecord
-          url: Rails.application.routes.url_helpers.email_attachment_path(id: id, part: attachment["part_id"])
+          url: Rails.application.routes.url_helpers.email_attachment_path(id:, part: attachment["part_id"])

File: app/models/email_template.rb
Apply the fix to this code:
@@ -31,11 +31,11 @@ class EmailTemplate < ApplicationRecord
-      found_template = EmailTemplate.where(global: false).where(name: name)
+      found_template = EmailTemplate.where(global: false).where(name:)
-      found_template = EmailTemplate.by_tenant(tenant).where(global: false).where(name: name)
+      found_template = EmailTemplate.by_tenant(tenant).where(global: false).where(name:)
-    found_template = found_template.where.not(id: id) if id.present?
+    found_template = found_template.where.not(id:) if id.present?

Apply the fix to this code:
@@ -44,8 +44,8 @@ class EmailTemplate < ApplicationRecord
-    found_template = EmailTemplate.by_enterprise(target_tenant.enterprise).where(global: true).where(name: name)
-    found_template = found_template.where.not(id: id) if id.present?
+    found_template = EmailTemplate.by_enterprise(target_tenant.enterprise).where(global: true).where(name:)
+    found_template = found_template.where.not(id:) if id.present?

File: app/models/email_validation.rb
Apply the fix to this code:
@@ -232,7 +232,7 @@ class EmailValidation < ApplicationRecord
-              rescan_needed: rescan_needed,
+              rescan_needed:,

Apply the fix to this code:
@@ -245,7 +245,7 @@ class EmailValidation < ApplicationRecord
-                rescan_needed: rescan_needed,
+                rescan_needed:,

File: app/models/estimate.rb
Apply the fix to this code:
@@ -140,7 +140,7 @@ class Estimate < ApplicationRecord
 
-      where(tenant_id: tenant_id).
+      where(tenant_id:).

Apply the fix to this code:
@@ -201,41 +201,41 @@ class Estimate < ApplicationRecord
 
-    where_condition = sanitize_sql("(tasks.taskable_type = 'Estimate' AND tasks.taskable_id = :id)", id: id)
+    where_condition = sanitize_sql("(tasks.taskable_type = 'Estimate' AND tasks.taskable_id = :id)", id:)
-    Task.where(tenant: tenant).
+    Task.where(tenant:).
 
-    where_condition = sanitize_sql("(phone_calls.phoneable_type = 'Estimate' AND phone_calls.phoneable_id = :id)", id: id)
+    where_condition = sanitize_sql("(phone_calls.phoneable_type = 'Estimate' AND phone_calls.phoneable_id = :id)", id:)
-    PhoneCall.where(tenant: tenant).
+    PhoneCall.where(tenant:).
 
-    where_condition = sanitize_sql("(notes.context_type = 'Estimate' AND notes.context_id = :id)", id: id)
+    where_condition = sanitize_sql("(notes.context_type = 'Estimate' AND notes.context_id = :id)", id:)
-    Note.where(tenant: tenant).
+    Note.where(tenant:).
 
-    where_condition = sanitize_sql("(meetings.context_type = 'Estimate' AND meetings.context_id = :id)", id: id)
+    where_condition = sanitize_sql("(meetings.context_type = 'Estimate' AND meetings.context_id = :id)", id:)
-    Meeting.where(tenant: tenant).
+    Meeting.where(tenant:).

File: app/models/inquiry.rb
Apply the fix to this code:
@@ -475,7 +475,7 @@ class Inquiry < ApplicationRecord
-          inquiry: inquiry,
+          inquiry:,

Apply the fix to this code:
@@ -494,7 +494,7 @@ class Inquiry < ApplicationRecord
-        user_id: user_id,
+        user_id:,

Apply the fix to this code:
@@ -502,7 +502,7 @@ class Inquiry < ApplicationRecord
 
-    Asset.where(context_type: "Inquiry", context_id: id, tenant_id: tenant_id).each do |asset|
+    Asset.where(context_type: "Inquiry", context_id: id, tenant_id:).each do |asset|

Apply the fix to this code:
@@ -513,31 +513,31 @@ class Inquiry < ApplicationRecord
 
-    Invoice.where(tenant: tenant, inquiry_id: id)
+    Invoice.where(tenant:, inquiry_id: id)
 
-    Estimate.where(tenant: tenant, inquiry_id: id)
+    Estimate.where(tenant:, inquiry_id: id)
 
-    Shipment.where(tenant: tenant, inquiry_id: id)
+    Shipment.where(tenant:, inquiry_id: id)
 
-    Task.where(tenant: tenant, taskable_type: "Inquiry", taskable_id: id).order(created_at: :asc)
+    Task.where(tenant:, taskable_type: "Inquiry", taskable_id: id).order(created_at: :asc)
 
-    PhoneCall.where(tenant: tenant, phoneable_type: "Inquiry", phoneable_id: id).order(created_at: :asc)
+    PhoneCall.where(tenant:, phoneable_type: "Inquiry", phoneable_id: id).order(created_at: :asc)
 
-    Note.where(tenant: tenant, context_type: "Inquiry", context_id: id).order("created_at DESC, id DESC")
+    Note.where(tenant:, context_type: "Inquiry", context_id: id).order("created_at DESC, id DESC")
 
-    Meeting.where(tenant: tenant, context_type: "Inquiry", context_id: id).order(created_at: :asc)
+    Meeting.where(tenant:, context_type: "Inquiry", context_id: id).order(created_at: :asc)

Apply the fix to this code:
@@ -562,7 +562,7 @@ class Inquiry < ApplicationRecord
 
-    contact_matches = Contact.where(tenant: tenant, deleted: false, temp: false).where.not(platform_id: nil)
+    contact_matches = Contact.where(tenant:, deleted: false, temp: false).where.not(platform_id: nil)

Apply the fix to this code:
@@ -577,14 +577,14 @@ class Inquiry < ApplicationRecord
 
-    companies = Company.where(tenant: tenant, walk_in: false).where.not(platform_id: nil)
+    companies = Company.where(tenant:, walk_in: false).where.not(platform_id: nil)
 
-      best_similarity_value = companies.where(tenant: tenant, walk_in: false).best_similarity_value(target_company_name)
+      best_similarity_value = companies.where(tenant:, walk_in: false).best_similarity_value(target_company_name)
-      companies = companies.where(tenant: tenant, walk_in: false).by_fuzzy_name(target_company_name, fuzzy_value)
+      companies = companies.where(tenant:, walk_in: false).by_fuzzy_name(target_company_name, fuzzy_value)

Apply the fix to this code:
@@ -631,11 +631,11 @@ class Inquiry < ApplicationRecord
 
-          tenant_id: tenant_id,
-          first_name: first_name,
-          last_name: last_name,
+          tenant_id:,
+          first_name:,
+          last_name:,
-          phone: phone,
+          phone:,

Apply the fix to this code:
@@ -652,7 +652,7 @@ class Inquiry < ApplicationRecord
 
-          tenant_id: tenant_id,
+          tenant_id:,

Apply the fix to this code:
@@ -667,7 +667,7 @@ class Inquiry < ApplicationRecord
-          platform_vat_number: platform_vat_number,
+          platform_vat_number:,

File: app/models/invoice.rb
Apply the fix to this code:
@@ -170,7 +170,7 @@ class Invoice < ApplicationRecord
-      result = Shipment.where(tenant: tenant, platform_id: platform_source_shipment_platform_id).first
+      result = Shipment.where(tenant:, platform_id: platform_source_shipment_platform_id).first

Apply the fix to this code:
@@ -206,7 +206,7 @@ class Invoice < ApplicationRecord
 
-    Invoice.where(tenant: tenant).where("platform_data->>'source_invoice_platform_id' = ?", platform_id).reorder("").take
+    Invoice.where(tenant:).where("platform_data->>'source_invoice_platform_id' = ?", platform_id).reorder("").take

Apply the fix to this code:
@@ -232,7 +232,7 @@ class Invoice < ApplicationRecord
-        result = Estimate.where(tenant: tenant, invoice_number: source_estimate_number).first
+        result = Estimate.where(tenant:, invoice_number: source_estimate_number).first

Apply the fix to this code:
@@ -243,7 +243,7 @@ class Invoice < ApplicationRecord
 
-    where_condition = sanitize_sql("(tasks.taskable_type IN ('Invoice', 'Sale', 'Order') AND tasks.taskable_id = :id)", id: id)
+    where_condition = sanitize_sql("(tasks.taskable_type IN ('Invoice', 'Sale', 'Order') AND tasks.taskable_id = :id)", id:)

Apply the fix to this code:
@@ -253,13 +253,13 @@ class Invoice < ApplicationRecord
-    Task.where(tenant: tenant).
+    Task.where(tenant:).
 
-    where_condition = sanitize_sql("(phone_calls.phoneable_type IN ('Invoice', 'Sale', 'Order') AND phone_calls.phoneable_id = :id)", id: id)
+    where_condition = sanitize_sql("(phone_calls.phoneable_type IN ('Invoice', 'Sale', 'Order') AND phone_calls.phoneable_id = :id)", id:)

Apply the fix to this code:
@@ -269,13 +269,13 @@ class Invoice < ApplicationRecord
-    PhoneCall.where(tenant: tenant).
+    PhoneCall.where(tenant:).
 
-    where_condition = sanitize_sql("(notes.context_type IN ('Invoice', 'Sale', 'Order') AND notes.context_id = :id)", id: id)
+    where_condition = sanitize_sql("(notes.context_type IN ('Invoice', 'Sale', 'Order') AND notes.context_id = :id)", id:)

Apply the fix to this code:
@@ -285,13 +285,13 @@ class Invoice < ApplicationRecord
-    Note.where(tenant: tenant).
+    Note.where(tenant:).
 
-    where_condition = sanitize_sql("(meetings.context_type IN ('Invoice', 'Sale', 'Order') AND meetings.context_id = :id)", id: id)
+    where_condition = sanitize_sql("(meetings.context_type IN ('Invoice', 'Sale', 'Order') AND meetings.context_id = :id)", id:)

Apply the fix to this code:
@@ -301,7 +301,7 @@ class Invoice < ApplicationRecord
-    Meeting.where(tenant: tenant).
+    Meeting.where(tenant:).

Apply the fix to this code:
@@ -349,7 +349,7 @@ class Invoice < ApplicationRecord
 
-    Proof.where(tenant_id: tenant_id, invoice_id: id, revision_of_id: nil).order(number: :asc)
+    Proof.where(tenant_id:, invoice_id: id, revision_of_id: nil).order(number: :asc)

Apply the fix to this code:
@@ -417,18 +417,18 @@ class Invoice < ApplicationRecord
-          "#{ApplicationController.helpers.number_to_currency(net_value, unit: "", tenant: tenant)}",
-          "#{ApplicationController.helpers.number_to_currency(tax_value, unit: "", tenant: tenant)}",
-          "#{ApplicationController.helpers.number_to_currency(gross_value, unit: "", tenant: tenant)}",
-          "#{ApplicationController.helpers.number_to_currency(sale.amount_due, unit: "", tenant: tenant)}",
-          "#{ApplicationController.helpers.number_to_currency(margin, unit:"", tenant: tenant, precision: 1)}"
+          "#{ApplicationController.helpers.number_to_currency(net_value, unit: "", tenant:)}",
+          "#{ApplicationController.helpers.number_to_currency(tax_value, unit: "", tenant:)}",
+          "#{ApplicationController.helpers.number_to_currency(gross_value, unit: "", tenant:)}",
+          "#{ApplicationController.helpers.number_to_currency(sale.amount_due, unit: "", tenant:)}",
+          "#{ApplicationController.helpers.number_to_currency(margin, unit:"", tenant:, precision: 1)}"
 
-    Invoice.where(tenant: tenant, invoiced: false, deferred: false).where("platform_data->'document_detail_ids' @> '[\"#{document_id.to_i}\"]'").reorder("").take
+    Invoice.where(tenant:, invoiced: false, deferred: false).where("platform_data->'document_detail_ids' @> '[\"#{document_id.to_i}\"]'").reorder("").take

Apply the fix to this code:
@@ -460,7 +460,7 @@ class Invoice < ApplicationRecord
 
-    invoices = Invoice.unscoped.where(tenant: enterprise.tenants.real, invoice_type: invoice_type)
+    invoices = Invoice.unscoped.where(tenant: enterprise.tenants.real, invoice_type:)

Apply the fix to this code:
@@ -492,8 +492,8 @@ class Invoice < ApplicationRecord
 
-      tenant: tenant,
-      user: user,
+      tenant:,
+      user:,

Apply the fix to this code:
@@ -528,8 +528,8 @@ class Invoice < ApplicationRecord
 
-      tenant: tenant,
-      user: user,
+      tenant:,
+      user:,

Apply the fix to this code:
@@ -557,8 +557,8 @@ class Invoice < ApplicationRecord
 
-      Invoice.where(tenant: tenant).invoiced,
-      tenant: tenant,
+      Invoice.where(tenant:).invoiced,
+      tenant:,

Apply the fix to this code:
@@ -589,18 +589,18 @@ class Invoice < ApplicationRecord
-            "#{ApplicationController.helpers.number_to_currency(profit[:net_sales],  tenant: tenant)}",
-            "#{ApplicationController.helpers.number_to_currency(profit[:vat],  tenant: tenant)}",
-            "#{ApplicationController.helpers.number_to_currency(profit[:gross_sales],  tenant: tenant)}",
+            "#{ApplicationController.helpers.number_to_currency(profit[:net_sales],  tenant:)}",
+            "#{ApplicationController.helpers.number_to_currency(profit[:vat],  tenant:)}",
+            "#{ApplicationController.helpers.number_to_currency(profit[:gross_sales],  tenant:)}",
-            "#{ApplicationController.helpers.number_to_currency(profit[:net_sales],  tenant: tenant)}",
-            "#{ApplicationController.helpers.number_to_currency(profit[:vat],  tenant: tenant)}",
-            "#{ApplicationController.helpers.number_to_currency(profit[:gross_sales],  tenant: tenant)}",
+            "#{ApplicationController.helpers.number_to_currency(profit[:net_sales],  tenant:)}",
+            "#{ApplicationController.helpers.number_to_currency(profit[:vat],  tenant:)}",
+            "#{ApplicationController.helpers.number_to_currency(profit[:gross_sales],  tenant:)}",

File: app/models/lead_import_field.rb
Apply the fix to this code:
@@ -16,7 +16,7 @@ class LeadImportField < ApplicationRecord
 
-    CompanyEnrichmentField.where(enterprise: enterprise).pluck(:name)
+    CompanyEnrichmentField.where(enterprise:).pluck(:name)

Apply the fix to this code:
@@ -34,7 +34,7 @@ class LeadImportField < ApplicationRecord
 
-    required_fields = LeadImportField.where(enterprise: enterprise, required: true)
+    required_fields = LeadImportField.where(enterprise:, required: true)

Apply the fix to this code:
@@ -44,10 +44,10 @@ class LeadImportField < ApplicationRecord
 
-        tags = TagCategory.where(enterprise: enterprise).global_only
+        tags = TagCategory.where(enterprise:).global_only
-        sources = LeadSource.where(enterprise: enterprise).pluck(:name).reject(&:empty?)
+        sources = LeadSource.where(enterprise:).pluck(:name).reject(&:empty?)

File: app/models/marketing_group.rb
Apply the fix to this code:
@@ -20,7 +20,7 @@ class MarketingGroup < ApplicationRecord
 
-      result = Campaign.where(email_template_id: email_template_ids, parent_id: nil, enterprise_id: enterprise_id).order(name: :asc)
+      result = Campaign.where(email_template_id: email_template_ids, parent_id: nil, enterprise_id:).order(name: :asc)

Apply the fix to this code:
@@ -30,7 +30,7 @@ class MarketingGroup < ApplicationRecord
 
-      result = Campaign.where(id: campaign_ids, enterprise_id: enterprise_id).order(name: :asc)
+      result = Campaign.where(id: campaign_ids, enterprise_id:).order(name: :asc)

File: app/models/meeting.rb
Apply the fix to this code:
@@ -34,10 +34,10 @@ class Meeting < ApplicationRecord
 
-    subject = I18n.t("new_printspeak_meeting", title: title)
-    subject = I18n.t("updated_printspeak_meeting", title: title) if type == "update"
-    subject = I18n.t("upcoming_printspeak_meeting", title: title) if type == "reminder"
-    subject = I18n.t("cancelled_printspeak_meeting", title: title) if type == "cancelled"
+    subject = I18n.t("new_printspeak_meeting", title:)
+    subject = I18n.t("updated_printspeak_meeting", title:) if type == "update"
+    subject = I18n.t("upcoming_printspeak_meeting", title:) if type == "reminder"
+    subject = I18n.t("cancelled_printspeak_meeting", title:) if type == "cancelled"


Once you've completed the changes, ensure all modified code follows the style guide and is tested.
